<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>AI ERP Assistant</title>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />

    <!-- Markdown + 3D Assets -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js" defer></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- Floating Background Glow -->
<div class="glow-bg"></div>
<div class="gradient-overlay"></div>

<!-- Header -->
<header>
    <h2>
        <i class="fa-solid fa-robot"></i>
        <span>Let Me Assist You!</span>
    </h2>
    <div class="header-actions">
        <button style="color: White;" onclick="location.reload()">Refresh</button>
        <button id="historyBtn" title="Chat History">
            <i class="fa-solid fa-clock-rotate-left"></i> History
        </button>
        <button id="themeToggle" title="Toggle Dark Mode">
            <i class="fa-solid fa-user-tie"></i>
        </button>


    </div>
</header>

<!-- Sidebar -->
<aside id="SideBar">
    <div class="sidebar-header">
        <h3><i class="fa-solid fa-comments"></i> Chat History</h3>
    </div>


    <select id="sortHistory">
        <option value="date">ğŸ“… Sort by Date</option>
        <option value="topic">ğŸ“‚ Sort by Topic</option>
    </select>

    <input type="text" id="searchHistory" placeholder="ğŸ” Search history..." />

    <div id="historyList" class="fancy-scroll">
        <!-- Chat history dynamically injected -->
    </div>

    <button id="clearHistory"><i class="fa-solid fa-trash"></i> Clear All</button>
</aside>

<!-- Main Content -->
<main id="chatContainer" class="fancy-scroll">
    <div class="ai-message welcome-message fade-in">
        <div class="ai-avatar">
            <i class="fa-solid fa-circle-user"></i>
        </div>

        <div class="ai-text">
            <strong>Hello ğŸ‘‹</strong><br>
            I'm your AI ERP Assistant â€” ready to simplify your work. Try asking about reports, users, or real-time stats.
        </div>
    </div>

    <!-- ğŸ’¡ Add this container below -->
    <div id="myDfdContainer" class="dfd-container"></div>
<!--    <div id="dfdToolbar" style="text-align:center; margin-top:10px;">-->
<!--        <button id="zoomInBtn">ğŸ” + Zoom In</button>-->
<!--        <button id="zoomOutBtn">ğŸ” - Zoom Out</button>-->
<!--        <button id="copyDfdBtn">ğŸ“‹ Copy DFD</button>-->
<!--    </div>-->



<!--    <div id="ai-avatar-container" style="position: fixed; bottom: 80px; right: 40px; width: 200px; height: 200px; z-index: 9999;">-->
<!--        <canvas id="ai-avatar-canvas" style="width: 100%; height: 100%;"></canvas>-->
<!--        <div id="ai-avatar-text" style="display: none; color: white; background: rgba(0,0,0,0.6); padding: 8px; border-radius: 8px; margin-top: 4px; text-align: center;"></div>-->
<!--        <button id="ai-avatar-toggle">Hide</button>-->
<!--        <button id="ai-avatar-talk">Voice</button>-->
<!--        <input id="ai-input" placeholder="Ask me..." />-->
<!--        <button id="ai-send">Send</button>-->
<!--    </div>-->

</main>


<!-- Input Area -->
<div id="inputArea">
    <div class="file-section">
        <label id="fileLabel"><i class="fa-solid fa-paperclip"></i> Attach</label>
        <button id="AddFiles"><i class="fa-solid fa-plus"></i></button>
        <input type="file" id="fileInput" style="display:none" />
    </div>

    <button id="micBtn" title="Speak">
        <i class="fa-solid fa-microphone"></i>
    </button>

    <input
            type="text"
            id="userInput"
            placeholder="Ask something to AI Assistant..."
            aria-label="User Input"
    />

    <button onclick="sendToAI()" title="Send Message" class="send-btn pulse">
        <i class="fa-solid fa-paper-plane"></i>
    </button>
</div>

<!-- Scripts -->
<script src="Script.js" defer></script>
<script type="module" src="/JS/avatar.js"></script>
</body>
</html>
